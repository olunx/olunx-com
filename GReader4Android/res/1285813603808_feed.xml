<?xml version="1.0"?><feed xmlns:idx="urn:atom-extension:indexing" xmlns:media="http://search.yahoo.com/mrss/" xmlns:gr="http://www.google.com/schemas/reader/atom/" xmlns="http://www.w3.org/2005/Atom" idx:index="no" gr:dir="ltr"><!--
Content-type: Preventing XSRF in IE.

--><generator uri="http://www.google.com/reader">Google Reader</generator><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title>一半是火焰一半是海水</title><gr:continuation>CP-Ynp-rvaMC</gr:continuation><link rel="self" href="https://www.google.com/reader/atom/feed/http://api.live.net/Users(-527258525974762729)/Main%3F$format=rss20?n=10"/><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/><updated>2010-08-27T06:01:28Z</updated><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282888888069"><id gr:original-id="F8AECD2A067A6B17!1584">tag:google.com,2005:reader/item/a05ec588fb830429</id><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="android开发"/><title type="html">android典型应用之访问网络</title><published>2010-08-27T05:20:14Z</published><updated>2010-08-27T05:20:14Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1584.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;div&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;android&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;网络&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;访问网络需要设置权限，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供了很好的封装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;例程&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;功能&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;从网上下载文本文件，并使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;textview&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;控件显示其内容&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;可从此处下载可独立运行的代码&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;br&gt;&lt;a href="http://download.csdn.net/source/2650779"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://download.csdn.net/source/2650779&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;权限&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;在&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;AndroidManifest.xml&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中需要加入访问网络的权限&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#0000ff"&gt;&lt;span&gt;&lt;i&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&amp;lt;&lt;/span&gt;&lt;/i&gt;&lt;/span&gt;&lt;span&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;uses-permission&lt;/span&gt;&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt; &lt;span&gt;&lt;span style="color:blue"&gt;android:name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&amp;quot;&lt;/span&gt;android.permission.INTERNET&lt;span&gt;&amp;quot; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/i&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;核心代码及说明&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;br&gt;&lt;/span&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;package com.android.mynet;&lt;br&gt;&lt;br&gt;import android.app.Activity;&lt;br&gt;import android.os.Bundle;&lt;br&gt;import java.io.*;&lt;br&gt;import java.net.*;&lt;br&gt;import org.apache.http.util.ByteArrayBuffer;&lt;br&gt;import android.widget.TextView;&lt;br&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;import android.util.Log;&lt;br&gt;&lt;br&gt;public class MyNetActivity extends Activity {&lt;br&gt;&lt;span&gt;    &lt;/span&gt;@Override&lt;br&gt;&lt;span&gt;    &lt;/span&gt;public void onCreate(Bundle savedInstanceState) {&lt;br&gt;&lt;span&gt;        &lt;/span&gt;super.onCreate(savedInstanceState);&lt;br&gt;&lt;span&gt;        &lt;/span&gt;setContentView(R.layout.main);&lt;br&gt;&lt;span&gt;        &lt;/span&gt;connect();&lt;br&gt;&lt;span&gt;    &lt;/span&gt;}&lt;br&gt;&lt;br&gt;&lt;span&gt;    &lt;/span&gt;public void connect()&lt;br&gt;&lt;span&gt;    &lt;/span&gt;{&lt;br&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&lt;/span&gt;String myString = null;&lt;br&gt;&lt;span&gt;        &lt;/span&gt;try {&lt;br&gt;&lt;span&gt;            &lt;/span&gt;URL myURL = new URL(&amp;quot;http://www.google.com/robots.txt&amp;quot;);&lt;br&gt;&lt;span&gt;            &lt;/span&gt;URLConnection ucon = myURL.openConnection();&lt;br&gt;&lt;span&gt;            &lt;/span&gt;InputStream is = ucon.getInputStream();&lt;br&gt;&lt;span&gt;            &lt;/span&gt;BufferedInputStream bis = new BufferedInputStream(is);&lt;br&gt;&lt;span&gt;            &lt;/span&gt;ByteArrayBuffer baf = new ByteArrayBuffer(50);&lt;br&gt;&lt;span&gt;            &lt;/span&gt;int current = 0;&lt;br&gt;&lt;span&gt;            &lt;/span&gt;while ((current = bis.read()) != -1) {&lt;br&gt;&lt;span&gt;                &lt;/span&gt;baf.append((byte)current);&lt;br&gt;&lt;span&gt;            &lt;/span&gt;}&lt;br&gt;&lt;span&gt;            &lt;/span&gt;myString = new String(baf.toByteArray());&lt;br&gt;&lt;span&gt;        &lt;/span&gt;} catch (Exception e) {&lt;br&gt;&lt;span&gt;            &lt;/span&gt;myString = e.getMessage();&lt;br&gt;&lt;span&gt;        &lt;/span&gt;}&lt;br&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;    &lt;/span&gt;TextView tv;&lt;br&gt;&lt;span&gt;        &lt;/span&gt;tv = (TextView) this.findViewById(R.id.tv1);&lt;br&gt;&lt;span&gt;        &lt;/span&gt;tv.setText(myString);&lt;br&gt;&lt;span&gt;    &lt;/span&gt;}&lt;br&gt;}&lt;/span&gt;&lt;/i&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;参考&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;:&lt;br&gt;http://labs.chinamobile.com/mblog/103798_25897&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282800144089"><id gr:original-id="F8AECD2A067A6B17!1583">tag:google.com,2005:reader/item/6141ecf6ed50f243</id><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="android开发"/><title type="html">android 开机动画</title><published>2010-08-26T04:44:38Z</published><updated>2010-08-26T04:46:21Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1583.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;div&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;介绍&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;开机画面由三部分组成，第一部分在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;bootloader&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动时显示，第二部分在启动&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;kernel&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;时显示，第三部分在系统启动时（&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;bootanimation&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;）显示（动画）&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;bootloader&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;开机图片&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;一般使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;rle&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式图片，不同的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统不同此图片可能放在不同位置，以下实例均以&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;G1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为例，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;G1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;放在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;splash&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;分区中&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;制作&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;rle&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式开机图片&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;将图片转成&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;320x480&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;256&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;色，保存成不带&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Alpha&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;通道的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;png&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;convert&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;工具将&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;splash.png&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;转换成８位色的&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;splash.raw&lt;br&gt;convert splash.png -depth 8 rgb:splash.raw&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;确认&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;splash.raw&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;大小为&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;460800&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;字节&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;c)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;工具&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;rgb2565&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;改变图像格式&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;out/host/linux-x86/bin/rgb2565 &amp;lt; splash.raw &amp;gt; splash.raw565&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;确认&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;splash.raw565&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;大小为&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;307200&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;字节&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;烧写（以&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;G1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为例）&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;按&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Power+Camera&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动到烧写模式&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;fastboot flash splash1 splash.raw565&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;kernel&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;开机图片&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;相关代码&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;kernel/drivers/video/msm/msm_fb.c&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;（&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;G1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;使用高通芯片组&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;MSM7201&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;芯片组）&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;它会读出根目录下的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;xx.rle&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，并显示为开机画面，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;rle&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;做法同上&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;bootanimation&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;开机动画&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;android 2.0&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;之前&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;bootanimation&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;程序显示开机画面，如需修改开机画面，需要修改源码&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;代码&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/cmds/bootanimation/*&lt;br&gt;frameworks/base/core/res/assets/images/android-logo*&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;android 2.0&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;及之后&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;bootanimation&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;程序显示开机画面，如需修改开机画面，不用修改代码，只需按格式要求做&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;bootanimation.zip&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;包，放在系统的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;/system/media&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;目录中，或&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;/data/local&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;目录中即可，两个目录下都存在时，优先使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;/data/local&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;下的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;代码&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/cmds/bootanimation/*&lt;br&gt;frameworks/base/core/res/assets/images*&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;c)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;制作动画包&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 84pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;                                       &lt;/span&gt;&lt;font face="Times New Roman"&gt;i.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;              &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;描述文件&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;desc.txt&lt;br&gt;480 427 30&lt;br&gt;p 1 0 part0 &lt;br&gt;p 0 10 part1 &lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;总体说明：&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;480&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为宽度，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;427&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为高度，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;30&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为帧数，即每秒播放动画&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;30&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;帧&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;部分说明：第一项&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;p&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为标志符，第二项为循环次数&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为只播放&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;1&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;次，０为无限循环，第三项为两次循环之间间隔的帧数，第四项为对应的目录名&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 84pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;                                      &lt;/span&gt;&lt;font face="Times New Roman"&gt;ii.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;              &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;图片&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;图片放在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;desc.txt&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中目录名指定的目录中，目录中按字符顺序播放&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 84pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;                                    &lt;/span&gt;&lt;font face="Times New Roman"&gt;iii.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;              &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;打包&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 105pt"&gt;&lt;span style="font-family:Wingdings;font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;²&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;windows&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;winrar&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;找包，选择&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;ZIP&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式，压缩标准要选&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;“&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;储存&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;”&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 105pt"&gt;&lt;span style="font-family:Wingdings;font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;²&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;linux&lt;br&gt;zip -0 -r ../bootanimation.zip ./*&lt;br&gt;linux&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;命令使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;-0&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;指定压缩等级为最低等级&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;stored&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，即只归档不压缩，否则可能由于包格式问题引起动画显示为黑屏&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 105pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-family:Wingdings;font-size:9pt" lang="EN-US"&gt;&lt;span&gt;²&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;注意&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;打包不要带上层目录&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;参考&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;bootanimation&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;相关&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;a href="http://blog.21ic.com/user1/2537/archives/2009/65606.html"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://blog.21ic.com/user1/2537/archives/2009/65606.html&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;rle&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;文件制作&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;a href="http://hi.baidu.com/kernel_linux/blog/item/9eff140f9d089c206159f3cb.html"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://hi.baidu.com/kernel_linux/blog/item/9eff140f9d089c206159f3cb.html&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;bootloader&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;启动&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;a href="http://blog.csdn.net/yili_xie/archive/2010/05/14/5592276.aspx"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://blog.csdn.net/yili_xie/archive/2010/05/14/5592276.aspx&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;(转载请注明出处&lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282287616477"><id gr:original-id="F8AECD2A067A6B17!1582">tag:google.com,2005:reader/item/cd07f44d93845113</id><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="android开发"/><title type="html">android系统自带的Service原理与使用</title><published>2010-08-20T06:00:19Z</published><updated>2010-08-27T05:38:50Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1582.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt; &lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;的后台运行在很多&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;service&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，它们在系统启动时被&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SystemServer&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开启，支持系统的正常工作，比如&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;MountService&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;监听是否有&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SD&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;卡安装及移除，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;ClipboardService&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供剪切板功能，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;PackageManagerService&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供软件包的安装移除及查看等等，应用程序可以通过系统提供的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Manager&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接口来访问这些&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Service&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供的数据，以下将说明他们的工具流程&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;举例说明基本流程&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;以&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统支持&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;（传感器）实例来说明框架层的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;service&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;和&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;manager&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;是如何配合工作的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;什么是&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;br&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;是传感器&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;, &lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;比如控制横竖屏切换利用的就是重力传感器&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;(gsensor), &lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;还有&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;accelerator sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;可取得&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;x, y, z&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;三个轴上的加速度&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;应用如平衡球&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;, &lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;小猴吃香蕉等&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;应用程序调用（以下为关键代码）&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;sensorManager=(SensorManager)getSystemService(context.SENSOR_SERVICE);&lt;br&gt;lightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);&lt;br&gt;sensorManager.registerListener(sensorListener, lightSensor, SensorManager.SENSOR_DELAY_NORMAL);&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;Manager&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;层&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供给应用程序调用的接口，同实与&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Service&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;交互，实现功能&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/core/java/android/hardware/SensorManager.java&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;Service&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;层&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开机时就运行的管理&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;的后台服务&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/services/java/com/android/server/SensorService.java&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;snesor&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;后台服务需要的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;JNI&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，通过它与系统级交互&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/services/jni/com_android_server_SensorService.cpp&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统层&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;传感器的头文件，硬件提供商按此文件的定义实现其功能&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;hardware/libhardware/include/hardware/sensors.h&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;传感器的系统层实现，与内核交互，此处通常是硬件提供商提供的&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;hareware/libsensors&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;6)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;内核及硬件层&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;内核访问硬件，同时以设备文件等方式提供给上层控制接口和传感器数据&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统层实现&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/core/java/android/*Manager.java&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;对应用的接口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/core/jni/&lt;span&gt;                                                     &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;对应用的接口的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;JNI&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/services/java/com/android/server/&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;后台服务&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/services/jni/&lt;span&gt;                                                        &lt;/span&gt;JNI&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;与系统层接口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;hardware/libhardware/include/&lt;span&gt;                                              &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;系统层头文件&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;6)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;hardware/libxxx&lt;span&gt;                                                                     &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;系统库支持&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;7)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;内核支持&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;应用程序如何使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;查看系统提供哪些服务&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;find frameworks/base/core/java/android/ -name *Manager.java&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;此处可以看到调用系统提供服务的入口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;一般&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;register listener&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，事件发生时都收到回调&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;span style="font-size:9pt"&gt;&lt;font face="Times New Roman"&gt;5.    &lt;/font&gt;新建一个&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;service&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;（以&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;froyo&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为例）&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接口&lt;/span&gt;&lt;span style="font-size:9pt"&gt;：&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接口供应用调用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/core/java/android/app/ContextImpl.java&lt;span&gt;  &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;加服务名与&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Manager&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;对应&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/core/java/android/content/Context.java&lt;span&gt;    &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;加服务名定义&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;Manager&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;：&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供服务对应的调用接口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/core/java/android/app/StartXXXXManager.java&lt;span&gt;        &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;实现调用接口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/core/java/android/app/IXXXXManager.aidl&lt;span&gt;      &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;定义调用接口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/Android.mk&lt;span&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;加入&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;aidl&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;的编译&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;service&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;：&lt;/span&gt;&lt;span style="font-size:9pt"&gt;提供后台服务支持&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/services/java/com/android/server/XXXXService.java&lt;span&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;服务实现&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;frameworks/base/services/java/com/android/server/SystemServer.java&lt;span&gt;   &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动服务&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;/font&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;(转载请注明出处&lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;
&lt;div&gt;&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282287616459"><id gr:original-id="F8AECD2A067A6B17!1581">tag:google.com,2005:reader/item/9d4395fa4d33afdb</id><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="android开发"/><title type="html">android的包管理</title><published>2010-08-20T05:59:24Z</published><updated>2010-08-26T04:49:32Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1581.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;包管理（&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Package manager&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;）非常重要，它关系着软件包的安装，卸载，查看和使用，它是运行在后台的一个服务，名叫&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;PackageManagerService&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，包括对软件包的解包，验证，安装等&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统软件包管理信息存储在哪&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;/data/system/packages.xml&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;通过它可以看到系统安装的所有软件包，以及软件包的信息&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;包管理相关源码在哪&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/services/java/com/android/server/PackageManagerService.java&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统自带的软件能升级吗（即安装在系统分区&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;system&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中的包，如电话，短信）&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;可以升级，如果升级&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;/system/app&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;目录中的包，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;PackageManagerServer.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;对此情况进行处理，被升级的包出现&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;package.xml&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;updated-package&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;字段中，新的包信息会写在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;package&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;字段中，卸载新包后，原包会恢复到&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;package&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;字段中。启动时新的包会优先地被启动&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为什么安装软件时会报错&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;版本不匹配&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;比如在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;2.2&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SDK&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;上编译的软件，不能在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;1.6&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;上安装&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;AndroidManifest.xml&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;中可以对版本所安装系统的版本进行指定&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;签名信息不匹配&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;软件升级时会做签名信息对比，如果前后两个包签名不一致，则不能安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;包完整性不满足&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;签名是对包中每个文件进行的，它的压缩格式是&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;zip&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，如果手工解包后替换了某文件再打包，被替换的文件与签名验证不一致，则不能安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式不对&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;有些从网上下载的包可能打了多层压缩，比如又将&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;apk&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;打包成了&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;rar&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;格式，建议解压缩看一下格式再安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;6.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;包的权限&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;软件在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;AndroidMenifest.xml&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中都会指明其需要的权限，安装包时图形界面也通常显示出它所需要的权限，供用户判断是否安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;特殊情况&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;有些软件没有说明需要访问&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SD&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;卡和打电话的权限，但安装后却出现此权限。&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;当使用旧的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SDK&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;所做的包向新的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SDK&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;安装时，可能出现这种情况，见&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;framework/base/core/java/android/content/pm/PackageParser.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;NEW_PERMISSION&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，此处判断编译使用的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SDK&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;版本是否在&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;android1.6&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;之前&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;(DONUT)&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，如果在之前就加入这两个权限。&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com"&gt;http://xy0811.spaces.live.com&lt;/a&gt;)&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282280440142"><id gr:original-id="F8AECD2A067A6B17!1580">tag:google.com,2005:reader/item/6cd3b6ba8b93d0bc</id><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="android开发"/><title type="html">Android的传感器</title><published>2010-08-20T04:23:00Z</published><updated>2010-08-20T04:23:00Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1580.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt; &lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;br&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;译做感应器或传感器，&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;android&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;架构支持多种&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，手机硬件不一定支持每一种&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;span&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;android&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;系统支持的&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，以&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;froyo&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;为例（详见&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;font face="Times New Roman"&gt;SensorManager.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中的定义）&lt;/span&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;重力&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="DE"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;STANDARD_GRAVITY&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;加速度：&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;XYZ&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;三个方向上的加速度&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_ACCELEROMETER&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;温度：周围温度&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_TEMPERATURE&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;磁场：&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;XYZ&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;三轴上的磁场&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_MAGNETIC_FIELD&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;光线：周围亮度，用于调节对应的屏幕亮度&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_LIGHT&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;6)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接近：相应传感器与物体的距离，如在接电话时，判断耳朵与手机的距离，耳朵触屏被忽略，适里黑屏&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_PROXIMITY&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;7)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;角度：&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;XYZ&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;轴的角度&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;SENSOR_ORIENTATION&lt;br&gt;SENSOR_ORIENTATION_RAW&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;8)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;其它&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;与具体应用相关，比如照相模块中实现的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;CAMERA SENSOR&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;如何访问&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;应用通过&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;SensorManager&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;访问各个&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，注册一个&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Listener&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;即可监听相应的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;sensor&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;事件&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;参考&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;a href="http://www.uuroid.com/?p=39"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://www.uuroid.com/?p=39&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;br&gt;&lt;a href="http://www.ibm.com/developerworks/cn/opensource/os-android-sensor/"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://www.ibm.com/developerworks/cn/opensource/os-android-sensor/&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt; &lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/span&gt;&lt;/p&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282272886404"><id gr:original-id="F8AECD2A067A6B17!1579">tag:google.com,2005:reader/item/3c87fa4ead2979ff</id><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="android开发"/><title type="html">Android的开机流程</title><published>2010-08-20T02:16:00Z</published><updated>2010-08-20T02:18:32Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1579.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统引导&lt;span lang="EN-US"&gt;bootloader&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;bootable/bootloader/*&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：加电后，&lt;span lang="EN-US"&gt;CPU&lt;/span&gt;将先执行&lt;span lang="EN-US"&gt;bootloader&lt;/span&gt;程序，此处有三种选择&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开机按&lt;span lang="EN-US"&gt;Camera+Power&lt;/span&gt;启动到&lt;span lang="EN-US"&gt;fastboot&lt;/span&gt;，即命令或&lt;span lang="EN-US"&gt;SD&lt;/span&gt;卡烧写模式，不加载内核及文件系统，此处可以进行工厂模式的烧写&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开机按&lt;span lang="EN-US"&gt;Home+Power&lt;/span&gt;启动到&lt;span lang="EN-US"&gt;recovery&lt;/span&gt;模式，加载&lt;span lang="EN-US"&gt;recovery.img&lt;/span&gt;，&lt;span lang="EN-US"&gt;recovery.img&lt;/span&gt;包含内核，基本的文件系统，用于工程模式的烧写&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;c)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开机按&lt;span lang="EN-US"&gt;Power&lt;/span&gt;，正常启动系统，加载&lt;span lang="EN-US"&gt;boot.img&lt;/span&gt;，&lt;span lang="EN-US"&gt;boot.img&lt;/span&gt;包含内核，基本文件系统，用于正常启动手机（以下只分析正常启动的情况）&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;内核&lt;span lang="EN-US"&gt;kernel&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;kernel/*&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：&lt;span lang="EN-US"&gt;kernel&lt;/span&gt;由&lt;span lang="EN-US"&gt;bootloader&lt;/span&gt;加载&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;文件系统及应用&lt;span lang="EN-US"&gt;init&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;system/core/init/*&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;配置文件：&lt;span lang="EN-US"&gt;system/rootdir/init.rc&lt;/span&gt;，&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：&lt;span lang="EN-US"&gt;init&lt;/span&gt;是一个由内核启动的用户级进程，它按照&lt;span lang="EN-US"&gt;init.rc&lt;/span&gt;中的设置执行：启动服务（这里的服务指&lt;span lang="EN-US"&gt;linux&lt;/span&gt;底层服务，如&lt;span lang="EN-US"&gt;adbd&lt;/span&gt;提供&lt;span lang="EN-US"&gt;adb&lt;/span&gt;支持，&lt;span lang="EN-US"&gt;vold&lt;/span&gt;提供&lt;span lang="EN-US"&gt;SD&lt;/span&gt;卡挂载等），执行命令和按其中的配置语句执行相应功能&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;重要的后台程序&lt;span lang="EN-US"&gt;zygote&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;frameworks/base/cmds/app_main.cpp&lt;/span&gt;等&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：&lt;span lang="EN-US"&gt;zygote&lt;/span&gt;是一个在&lt;span lang="EN-US"&gt;init.rc&lt;/span&gt;中被指定启动的服务，该服务对应的命令是&lt;span lang="EN-US"&gt;/system/bin/app_process&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;建立&lt;span lang="EN-US"&gt;Java Runtime&lt;/span&gt;，建立虚拟机&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="color:black;font-size:9pt"&gt;建立&lt;span lang="EN-US"&gt;Socket&lt;/span&gt;接收&lt;span lang="EN-US"&gt;ActivityManangerService&lt;/span&gt;的请求，用于&lt;span lang="EN-US"&gt;Fork&lt;/span&gt;应用程序&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;c)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动&lt;span lang="EN-US"&gt;System Server&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;5.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统服务&lt;span lang="EN-US"&gt;system server&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;frameworks/base/services/java/com/android/server/SystemServer.java&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：被&lt;span lang="EN-US"&gt;zygote&lt;/span&gt;启动，通过&lt;span lang="EN-US"&gt;System Manager&lt;/span&gt;管理&lt;span lang="EN-US"&gt;android&lt;/span&gt;的服务（这里的服务指&lt;span lang="EN-US"&gt;frameworks/base/services&lt;/span&gt;下的服务，如卫星定位服务，剪切板服务等）&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;6.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;桌面&lt;span lang="EN-US"&gt;launcher&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码：&lt;span lang="EN-US"&gt;ActivityManagerService.java&lt;/span&gt;为入口，&lt;span lang="EN-US"&gt;packages/apps/launcher*&lt;/span&gt;实现&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：系统启动成功后&lt;span lang="EN-US"&gt;SystemServer&lt;/span&gt;使用&lt;span lang="EN-US"&gt;xxx.systemReady()&lt;/span&gt;通知各个服务，系统已经就绪，桌面程序&lt;span lang="EN-US"&gt;Home&lt;/span&gt;就是在&lt;span lang="EN-US"&gt;ActivityManagerService.systemReady()&lt;/span&gt;通知的过程中建立的，最终调用&lt;span lang="EN-US"&gt;startHomeActivityLocked()&lt;/span&gt;启&lt;span lang="EN-US"&gt;launcher&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;7.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;解锁&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;&lt;font color="#000000"&gt;源码：&lt;/font&gt;&lt;span lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000"&gt;frameworks/policies/base/phone/com/android/internal/policy/impl/*lock*&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：系统启动成功后&lt;span lang="EN-US"&gt;SystemServer&lt;/span&gt;调用&lt;span lang="EN-US"&gt;wm.systemReady()&lt;/span&gt;通知&lt;span lang="EN-US"&gt;WindowManagerService&lt;/span&gt;，进而调用&lt;span lang="EN-US"&gt;PhoneWindowManager&lt;/span&gt;，最终通过&lt;span lang="EN-US"&gt;LockPatternKeyguardView&lt;/span&gt;显示解锁界面，跟踪代码可以看到解锁界面并不是一个&lt;span lang="EN-US"&gt;Activity&lt;/span&gt;，这是只是向特定层上绘图，其代码了存放在特殊的位置&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;8.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;开机自启动的第三方应用程序&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;&lt;font color="#000000"&gt;源码：&lt;/font&gt;&lt;span lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000"&gt;frameworks/base/services/java/com/android/server/am/ActivityManagerService.java&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;        &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;说明：系统启动成功后&lt;span lang="EN-US"&gt;SystemServer&lt;/span&gt;调用&lt;span lang="EN-US"&gt;ActivityManagerNative.getDefault().systemReady()&lt;/span&gt;通知&lt;span lang="EN-US"&gt;ActivityManager&lt;/span&gt;启动成功，&lt;span lang="EN-US"&gt;ActivityManager&lt;/span&gt;会通过置变量&lt;span lang="EN-US"&gt;mBooting&lt;/span&gt;，通知它的另一线程，该线程会发送广播&lt;span lang="EN-US"&gt;android.intent.action.BOOT_COMPLETED&lt;/span&gt;以告知已注册的第三方程序在开机时自动启动。&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;9.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;    &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;&lt;font color="#000000"&gt;总结&lt;/font&gt;&lt;span lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;综上所述，系统层次关于启动最核心的部分是&lt;span lang="EN-US"&gt;zygote(&lt;/span&gt;即&lt;span lang="EN-US"&gt;app_process)&lt;/span&gt;和&lt;span lang="EN-US"&gt;system server&lt;/span&gt;，&lt;span lang="EN-US"&gt;zygote&lt;/span&gt;它负责最基本的虚拟机的建立，以支持各个应用程序的启动，而&lt;span lang="EN-US"&gt;system server&lt;/span&gt;用于管理&lt;span lang="EN-US"&gt;android&lt;/span&gt;后台服务，启动步骤及顺序。&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;10.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;参考&lt;span lang="EN-US"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 21pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;a href="http://blog.csdn.net/basonjiang_sz/category/648399.aspx"&gt;&lt;u&gt;&lt;font color="#800080"&gt;http://blog.csdn.net/basonjiang_sz/category/648399.aspx&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000"&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282112099192"><id gr:original-id="F8AECD2A067A6B17!1578">tag:google.com,2005:reader/item/07c87d0069b21a56</id><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="android开发"/><title type="html">Android的键盘事件处理</title><published>2010-08-18T05:47:52Z</published><updated>2010-08-18T05:47:52Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1578.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;基本流程&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;内核处理按键，通过设备文件的方式提供给&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;framework&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;层&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;framework&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;层的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;KeyInputQueue.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动线程从设备文件中读出键码，然后把读出的键码按&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;kl&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;文件转成相应键值&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;(JNI&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;调用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;EventHub.cpp)&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，最后写入事件队列&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;framework&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;层的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;WindowManagerService.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;启动线程从事件队列中读出键值，然后根据当前&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;focus&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;分发给相应窗口&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;UI&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;通过&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;KeyCharacterMap.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;处理&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;kcm&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;规则将用户基本按键与功能键&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;(Shift, Alt&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;等&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;组合&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，&lt;/span&gt;&lt;span style="font-size:9pt"&gt;得出最终按键&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;两个配置文件&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;通常更换一种新的硬件，可能其键盘布局及键码与标准版本不同，不用更改代码，只要修改以下配置文件即可（如果增加新的未定义功能的按键，则需要修改代码）&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;xxx.kl&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;位置&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;development/emulator/keymaps/*.kl&lt;span&gt;       &lt;/span&gt;(1.6&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;&lt;font color="#000000"&gt;版本模拟器使用&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;br&gt;sdk/emulator/keymaps/*.kl&lt;span&gt;   &lt;/span&gt;(2.2&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;版本模拟器使用&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;br&gt;vendor/xxx/xxx/*.kl&lt;span&gt;       &lt;/span&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;特定硬件专用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;kl)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;功能&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;硬件全键盘的键码与键值的对应规则文件（如&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;0x21&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;对应&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;A&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;）&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;xxx.kcm&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;a)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;          &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;位置&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;development/emulator/keymaps/*.kcm&lt;span&gt;   &lt;/span&gt;(1.6&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;&lt;font color="#000000"&gt;版本模拟器使用&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;br&gt;sdk/emulator/keymaps/*.kcm&lt;span&gt;         &lt;/span&gt;(2.2&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;版本模拟器使用&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;br&gt;vendor/xxx/xxx/*.kcm&lt;span&gt;    &lt;/span&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;特定硬件专用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;kcm)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 63pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;b)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;功能&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;硬件全键盘的键值对应表（如按下&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;Alt, Shift&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;时按键对应的键值）&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;相关代码&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;frameworks/base/core/java/android/view/KeyEvent.java&lt;span&gt;     &lt;/span&gt;(&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;按键事件定义&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/services/java/com/android/server/KeyInputQueue.java&lt;span&gt;       &lt;/span&gt;(&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;事件读取线程&lt;/span&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;)&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;frameworks/base/services/java/com/android/server/WindowManagerService.java&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;（事件分发线程）&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;span&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;frameworks/base/core/java/android/view/KeyCharacterMap.java&lt;span&gt;                   &lt;/span&gt;(&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;功能键转换&lt;/span&gt;&lt;span style="font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;kcm)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;frameworks/base/libs/ui/EventHub.cpp&lt;span&gt;   &lt;/span&gt;(&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;键码与键值转换&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;参考&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font color="#000000"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;a href="http://www.armfans.net/archiver/tid-2671.html"&gt;&lt;u&gt;&lt;font color="#800080"&gt;http://www.armfans.net/archiver/tid-2671.html&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;http://www.armfans.net/viewthread.php?tid=2671&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282108196294"><id gr:original-id="F8AECD2A067A6B17!1577">tag:google.com,2005:reader/item/6966229c29e48a2d</id><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="android开发"/><title type="html">android的图像识别</title><published>2010-08-18T04:59:56Z</published><updated>2010-08-18T04:59:56Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1577.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;什么是&lt;/span&gt;&lt;/font&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;简单的说这是基于图像动态捕捉处理、人脸识别、机器人视觉处理、图像信息认知录入等多为一体计算机视觉库&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;下载&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;ndk&lt;br&gt;&lt;/font&gt;&lt;a href="http://bbs.weiphone.com/read-htm-tid-521406.html"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://bbs.weiphone.com/read-htm-tid-521406.html&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;ndk&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 35.9pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;$ tar xvjf OpenCV-2.1.0.tar.bz2&lt;br&gt;$ cd android-ndk-1.6_r1&lt;br&gt;$ export NDKROOT=`pwd`&lt;br&gt;$ ./build/host-setup.sh&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;下载&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt;opencv&lt;br&gt;&lt;/font&gt;&lt;a href="http://github.com/billmccord/OpenCV-Android/downloads"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://github.com/billmccord/OpenCV-Android/downloads&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;编译&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv &lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 35.9pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;$ tar xvzf bill*&lt;br&gt;$ cd app&lt;br&gt;$ ln -s bill* opencv&lt;br&gt;$ make APP=opencv&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 35.9pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;$ adb push out/apps/opencv/libopencv.so /system/lib/&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;基于&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;的程序&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;下载的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;源码中&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;tests&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;目录下是几个例程，可以编译运行&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;想使用&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;opencv&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;更多功能，除需要界面程序外，还需增加&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;JNI&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接口&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1282108196289"><id gr:original-id="F8AECD2A067A6B17!1576">tag:google.com,2005:reader/item/2da3d652735f90b6</id><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="user/05631701788678678863/state/com.google/tracking-body-link-used" scheme="http://www.google.com/reader/" label="tracking-body-link-used"/><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="android开发"/><title type="html">android的文字识别OCR</title><published>2010-08-18T04:58:23Z</published><updated>2010-08-18T04:58:23Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1576.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt 14.2pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;功能：&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;span style="color:black;font-size:9pt"&gt;光学字符识别&lt;/span&gt;&lt;span style="font-family:Arial;color:black;font-size:9pt" lang="EN-US"&gt;(OCR,Optical Character Recognition)&lt;/span&gt;&lt;span style="color:black;font-size:9pt"&gt;是指对文本资料进行扫描，然后对图像文件进行分析处理，获取文字及版面信息的过程&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;典型应用：&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;名片扫描&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;android&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;源码实现：&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;external/tesseract/*&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;编译：&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;i&gt;&lt;span style="color:blue"&gt;$ cd external/tesseract/&lt;br&gt;$ mm&lt;/span&gt;&lt;/i&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;生成&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;libocr.so&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;，&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;push&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;系统&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;/system/lib/&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;中，它也可以放在软件的安装包里&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;例程下载：&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;1)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;在此下载&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;a href="http://code.google.com/p/mezzofanti/"&gt;&lt;u&gt;&lt;font color="#800080" face="Times New Roman"&gt;http://code.google.com/p/mezzofanti/&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;直接下载&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;apk&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;是能用的&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;, &lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;在源码中编译程序运行就退出，是由于可能&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;libocr.so&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;未安装&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;, &lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;把它&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;push&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;到系统中即可&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;i&gt;&lt;span style="color:blue"&gt;$ adb push libocr.so /data/data/com.itwizard.mezzofanti/lib/&lt;/span&gt;&lt;/i&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 42pt"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3)&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;         &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;主要借鉴&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;OCR.java&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;它是对&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;libocr.so&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;库的调用（&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;JNI&lt;/font&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;方式）&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com"&gt;http://xy0811.spaces.live.com&lt;/a&gt;)&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry><entry gr:is-read-state-locked="true" gr:crawl-timestamp-msec="1281939087003"><id gr:original-id="F8AECD2A067A6B17!1575">tag:google.com,2005:reader/item/185a454551ef92c0</id><category term="user/05631701788678678863/label/Android" scheme="http://www.google.com/reader/" label="Android"/><category term="user/05631701788678678863/state/com.google/reading-list" scheme="http://www.google.com/reader/" label="reading-list"/><category term="user/05631701788678678863/state/com.google/read" scheme="http://www.google.com/reader/" label="read"/><category term="android开发"/><title type="html">Android自带的人脸识别</title><published>2010-08-16T05:15:33Z</published><updated>2010-08-16T05:15:33Z</updated><link rel="alternate" href="http://xy0811.spaces.live.com/Blog/cns!F8AECD2A067A6B17!1575.entry" type="text/html"/><summary xml:base="http://xy0811.spaces.live.com/" type="html">&lt;p style="margin:0cm 0cm 0pt"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;font color="#000000" face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;1.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;Android&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;自带的人脸识别&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000" face="Times New Roman"&gt;Android&lt;/font&gt;&lt;/span&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt"&gt;自带的人脸识别只能识别出人脸在画面中的位置，中点，眼间距，角度等基本特性，提供给拍照性质的应用使用。从基本功能中不能得出明显的特征数据&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;2.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;底层库支持&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;external/neven/*&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;3.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;接口&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;frameworks/base/media/java/android/media/FaceDetector.java&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;4.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;Android&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt"&gt;源码参考&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font face="Times New Roman"&gt;&lt;font color="#000000"&gt;packages/apps/Gallery/src/com/android/camera/*&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;5.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;关键代码分析&lt;/span&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;package com.android.mydetect;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.app.Activity;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.widget.TextView;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.os.Bundle;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.media.FaceDetector;&lt;span&gt;    &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;人脸识别接口&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.widget.ImageView;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.BitmapFactory;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.Bitmap;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.PointF;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.Matrix;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.util.Log;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="FR"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.Canvas;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;import android.graphics.Paint;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;public class MyDetectActivity extends Activity {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;private ImageView mImageView;&lt;span&gt;    &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;图片显示控件&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;private Bitmap mBitmap;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;private float mScale = 1F;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;@Override&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;public void onCreate(Bundle savedInstanceState) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;super.onCreate(savedInstanceState);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;setContentView(R.layout.main);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;mImageView = (ImageView) this.findViewById(R.id.image);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;detect();&lt;span&gt;      &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;识别函数&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;private void handleFace(FaceDetector.Face f) {&lt;span&gt;        &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;在图片上对每张脸进行处理&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;PointF midPoint = new PointF();&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;int r = ((int) (f.eyesDistance() * mScale * 1.5));&lt;span&gt;         &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;取眼睛间距离&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;f.getMidPoint(midPoint);&lt;span&gt;       &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;取脸的中点&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;midPoint.x *= mScale;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;midPoint.y *= mScale;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;Canvas c = new Canvas(mBitmap);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;Paint p = new Paint();&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;p.setAntiAlias(true);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;p.setAlpha(0x80);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;c.drawCircle(midPoint.x, midPoint.y, r, p)&lt;span&gt;        &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;用半透明标出人脸区域&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;mImageView.setImageBitmap(mBitmap);&lt;span&gt;          &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;显示图片&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;private void detect() {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;Matrix matrix = new Matrix();&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;FaceDetector.Face[] mFaces = new FaceDetector.Face[3];&lt;span&gt;         &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;定义最多识别三张脸&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;int mNumFaces = 0;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.baby);&lt;span&gt;     &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;取原始图&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;if (mBitmap == null) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;return;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;if (mBitmap.getWidth() &amp;gt; 256) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;mScale = 256.0F / mBitmap.getWidth();&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;matrix.setScale(mScale, mScale);&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;Bitmap faceBitmap = Bitmap.createBitmap(mBitmap, 0, 0, mBitmap&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                                   &lt;/span&gt;.getWidth(), mBitmap.getHeight(), matrix, true);&lt;span&gt;        &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;生成缩放后的新图&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;mScale = 1.0F / mScale;&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;if (faceBitmap != null) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;FaceDetector detector = new FaceDetector(faceBitmap.getWidth(),&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                                            &lt;/span&gt;faceBitmap.getHeight(), mFaces.length);&lt;span&gt; &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;创建识别器&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;mNumFaces = detector.findFaces(faceBitmap, mFaces);&lt;span&gt;    &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;识别&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;if (mNumFaces &amp;gt; 0) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                                   &lt;/span&gt;for (int i = 0; i &amp;lt; mNumFaces; i++) {&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                                            &lt;/span&gt;handleFace(mFaces[i]);&lt;span&gt;        &lt;/span&gt;// &lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt"&gt;调用函数对人脸画面进行处理&lt;/span&gt;&lt;/i&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                                   &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                         &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;                &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;&lt;span&gt;       &lt;/span&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 27pt"&gt;&lt;i&gt;&lt;span style="color:blue;font-size:9pt" lang="EN-US"&gt;&lt;font face="Times New Roman"&gt;}&lt;/font&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p style="margin:0cm 0cm 0pt 1cm"&gt;&lt;font color="#000000"&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;span&gt;&lt;font face="Times New Roman"&gt;6.&lt;span style="font:7pt &amp;#39;Times New Roman&amp;#39;"&gt;     &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="font-size:9pt"&gt;完整例程下载&lt;/span&gt;&lt;/font&gt;&lt;span style="font-size:9pt" lang="EN-US"&gt;&lt;br&gt;&lt;font color="#000000"&gt;&lt;font face="Times New Roman"&gt;&lt;a href="http://download.csdn.net/source/2612476"&gt;http://download.csdn.net/source/2612476&lt;/a&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;(转载请注明出处: &lt;a href="http://xy0811.spaces.live.com/"&gt;http://xy0811.spaces.live.com/&lt;/a&gt;)&lt;/div&gt;</summary><author gr:unknown-author="true"><name>（作者未知）</name></author><source gr:stream-id="feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20"><id>tag:google.com,2005:reader/feed/http://api.live.net/Users(-527258525974762729)/Main?$format=rss20</id><title type="html">一半是火焰一半是海水</title><link rel="alternate" href="http://xy0811.spaces.live.com/" type="text/html"/></source></entry></feed>